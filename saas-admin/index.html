<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FS FOTOGRAFIAS | Painel SaaS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: #e2e8f0; min-height: 100vh; }

        /* Login */
        #loginScreen { display: flex; align-items: center; justify-content: center; min-height: 100vh; }
        .login-box { background: #1e293b; border: 1px solid #334155; border-radius: 0.75rem; padding: 2.5rem; width: 24rem; max-width: 90vw; }
        .login-box h1 { font-size: 1.5rem; font-weight: 700; text-align: center; margin-bottom: 0.25rem; }
        .login-box p { color: #94a3b8; font-size: 0.8125rem; text-align: center; margin-bottom: 1.5rem; }
        .login-box input { width: 100%; padding: 0.625rem 0.875rem; border: 1px solid #334155; border-radius: 0.375rem; background: #0f172a; color: #e2e8f0; font-size: 0.875rem; margin-bottom: 0.75rem; outline: none; }
        .login-box input:focus { border-color: #6366f1; }
        .login-box button { width: 100%; padding: 0.625rem; background: #6366f1; color: white; border: none; border-radius: 0.375rem; font-weight: 600; font-size: 0.875rem; cursor: pointer; transition: background 0.15s; }
        .login-box button:hover { background: #4f46e5; }
        .login-error { color: #f87171; font-size: 0.75rem; margin-bottom: 0.5rem; display: none; }

        /* Layout */
        #app { display: none; }
        .topbar { background: #1e293b; border-bottom: 1px solid #334155; padding: 0.75rem 1.5rem; display: flex; align-items: center; justify-content: space-between; }
        .topbar h1 { font-size: 1.125rem; font-weight: 700; }
        .topbar h1 span { color: #6366f1; }
        .topbar-right { display: flex; align-items: center; gap: 1rem; }
        .topbar-user { color: #94a3b8; font-size: 0.75rem; }
        .btn-logout { background: none; border: 1px solid #475569; color: #94a3b8; padding: 0.25rem 0.75rem; border-radius: 0.25rem; font-size: 0.75rem; cursor: pointer; }
        .btn-logout:hover { border-color: #ef4444; color: #ef4444; }

        .container { max-width: 80rem; margin: 0 auto; padding: 1.5rem; }

        /* Métricas */
        .metrics { display: grid; grid-template-columns: repeat(auto-fit, minmax(10rem, 1fr)); gap: 1rem; margin-bottom: 2rem; }
        .metric-card { background: #1e293b; border: 1px solid #334155; border-radius: 0.5rem; padding: 1.25rem; }
        .metric-label { font-size: 0.6875rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.25rem; }
        .metric-value { font-size: 1.75rem; font-weight: 700; color: #f1f5f9; }
        .metric-sub { font-size: 0.6875rem; color: #64748b; margin-top: 0.125rem; }

        /* Tabela */
        .section-title { font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem; display: flex; align-items: center; justify-content: space-between; }
        .table-wrap { background: #1e293b; border: 1px solid #334155; border-radius: 0.5rem; overflow: hidden; }
        table { width: 100%; border-collapse: collapse; }
        th { background: #0f172a; text-align: left; padding: 0.75rem 1rem; font-size: 0.6875rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600; }
        td { padding: 0.75rem 1rem; border-top: 1px solid #1e293b; font-size: 0.8125rem; }
        tr:hover td { background: #1e293b80; }
        .badge { padding: 0.125rem 0.5rem; border-radius: 9999px; font-size: 0.6875rem; font-weight: 600; }
        .badge-active { background: #065f46; color: #6ee7b7; }
        .badge-pending { background: #78350f; color: #fbbf24; }
        .badge-inactive { background: #7f1d1d; color: #fca5a5; }

        .btn { padding: 0.375rem 0.75rem; border-radius: 0.25rem; border: none; font-size: 0.75rem; font-weight: 500; cursor: pointer; transition: background 0.15s; }
        .btn-approve { background: #065f46; color: #6ee7b7; }
        .btn-approve:hover { background: #047857; }
        .btn-deactivate { background: #7f1d1d; color: #fca5a5; }
        .btn-deactivate:hover { background: #991b1b; }
        .btn-details { background: #1e3a5f; color: #93c5fd; }
        .btn-details:hover { background: #1e40af; }
        .btn-actions { display: flex; gap: 0.375rem; }

        /* Modal detalhes */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); display: none; align-items: center; justify-content: center; z-index: 100; }
        .modal-overlay.active { display: flex; }
        .modal { background: #1e293b; border: 1px solid #334155; border-radius: 0.75rem; padding: 1.5rem; width: 48rem; max-width: 95vw; max-height: 90vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.25rem; }
        .modal-header h2 { font-size: 1.25rem; font-weight: 700; }
        .modal-close { background: none; border: none; color: #94a3b8; font-size: 1.5rem; cursor: pointer; }
        .detail-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.25rem; }
        .detail-card { background: #0f172a; border-radius: 0.375rem; padding: 1rem; }
        .detail-card h4 { font-size: 0.6875rem; color: #94a3b8; text-transform: uppercase; margin-bottom: 0.375rem; }
        .detail-card .val { font-size: 1.25rem; font-weight: 700; }
        .detail-section { margin-bottom: 1rem; }
        .detail-section h3 { font-size: 0.875rem; font-weight: 600; margin-bottom: 0.5rem; color: #cbd5e1; }
        .detail-list { list-style: none; }
        .detail-list li { padding: 0.375rem 0; border-bottom: 1px solid #334155; font-size: 0.8125rem; display: flex; justify-content: space-between; }

        .loading { text-align: center; padding: 3rem; color: #64748b; }

        /* Tabs */
        .tabs { display: flex; gap: 0; margin-bottom: 1.5rem; border-bottom: 1px solid #334155; }
        .tab-btn { background: none; border: none; color: #94a3b8; padding: 0.75rem 1.25rem; font-size: 0.875rem; font-weight: 500; cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.15s; }
        .tab-btn:hover { color: #e2e8f0; }
        .tab-btn.active { color: #6366f1; border-bottom-color: #6366f1; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* Botões extras */
        .btn-trash { background: #78350f; color: #fbbf24; }
        .btn-trash:hover { background: #92400e; }
        .btn-restore { background: #065f46; color: #6ee7b7; }
        .btn-restore:hover { background: #047857; }
        .btn-delete-permanent { background: #7f1d1d; color: #fca5a5; }
        .btn-delete-permanent:hover { background: #991b1b; }

        /* Modal confirmação */
        .confirm-input { width: 100%; padding: 0.625rem 0.875rem; border: 1px solid #334155; border-radius: 0.375rem; background: #0f172a; color: #e2e8f0; font-size: 0.875rem; margin: 1rem 0; outline: none; }
        .confirm-input:focus { border-color: #ef4444; }
        .confirm-warning { color: #fbbf24; font-size: 0.8125rem; line-height: 1.6; margin-bottom: 0.5rem; }
        .confirm-actions { display: flex; gap: 0.75rem; justify-content: flex-end; margin-top: 1rem; }
        .btn-cancel { background: #334155; color: #94a3b8; padding: 0.5rem 1.25rem; border: none; border-radius: 0.375rem; font-size: 0.8125rem; cursor: pointer; }
        .btn-confirm-delete { background: #dc2626; color: white; padding: 0.5rem 1.25rem; border: none; border-radius: 0.375rem; font-size: 0.8125rem; font-weight: 600; cursor: pointer; }
        .btn-confirm-delete:disabled { background: #475569; cursor: not-allowed; }
    </style>
</head>
<body>

<!-- Login -->
<div id="loginScreen">
    <div class="login-box">
        <h1>FS <span style="color:#6366f1;">SaaS</span></h1>
        <p>Painel de administracao da plataforma</p>
        <div id="loginError" class="login-error"></div>
        <input type="email" id="loginEmail" placeholder="Email">
        <input type="password" id="loginPassword" placeholder="Senha">
        <button id="loginBtn">Entrar</button>
    </div>
</div>

<!-- App -->
<div id="app">
    <div class="topbar">
        <h1>FS <span>SaaS</span> Admin</h1>
        <div class="topbar-right">
            <span class="topbar-user" id="userInfo"></span>
            <button class="btn-logout" id="logoutBtn">Sair</button>
        </div>
    </div>

    <div class="container">
        <!-- Métricas -->
        <div class="metrics" id="metricsGrid">
            <div class="loading">Carregando metricas...</div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('orgs')">Organizacoes</button>
            <button class="tab-btn" onclick="switchTab('trash')">Lixeira <span id="trashCount"></span></button>
        </div>

        <!-- Tab: Organizações -->
        <div class="tab-content active" id="tabOrgs">
            <div class="table-wrap">
                <table>
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Slug</th>
                            <th>Owner</th>
                            <th>Plano</th>
                            <th>Sessoes</th>
                            <th>Fotos</th>
                            <th>Status</th>
                            <th>Criado em</th>
                            <th>Acoes</th>
                        </tr>
                    </thead>
                    <tbody id="orgsTable">
                        <tr><td colspan="9" class="loading">Carregando...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Tab: Lixeira -->
        <div class="tab-content" id="tabTrash">
            <div class="table-wrap">
                <table>
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Slug</th>
                            <th>Owner</th>
                            <th>Plano</th>
                            <th>Excluido em</th>
                            <th>Acoes</th>
                        </tr>
                    </thead>
                    <tbody id="trashTable">
                        <tr><td colspan="6" class="loading">Carregando...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal de confirmação de delete definitivo -->
    <div class="modal-overlay" id="confirmDeleteModal">
        <div class="modal" style="width:32rem;">
            <div class="modal-header">
                <h2 style="color:#fca5a5;">Excluir Definitivamente</h2>
                <button class="modal-close" onclick="closeConfirmDelete()">&times;</button>
            </div>
            <div>
                <p class="confirm-warning">
                    Esta acao e <strong>irreversivel</strong>. Todos os dados serao apagados permanentemente:
                    usuarios, site, sessoes, fotos, newsletter e arquivos de upload.
                </p>
                <p style="color:#94a3b8; font-size:0.8125rem;">
                    Digite o nome da organizacao para confirmar: <strong id="confirmOrgName" style="color:#f1f5f9;"></strong>
                </p>
                <input type="text" class="confirm-input" id="confirmInput" placeholder="Digite o nome da organizacao">
                <div class="confirm-actions">
                    <button class="btn-cancel" onclick="closeConfirmDelete()">Cancelar</button>
                    <button class="btn-confirm-delete" id="confirmDeleteBtn" disabled onclick="executePermanentDelete()">Excluir Definitivamente</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de detalhes -->
    <div class="modal-overlay" id="detailModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modalTitle">Detalhes</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div id="modalContent">
                <div class="loading">Carregando...</div>
            </div>
        </div>
    </div>
</div>

<script type="module" src="/saas-admin/js/app.js"></script>
</body>
</html>
